<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RB PRO LİG - Puan Durumu</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 90%; margin: 20px auto; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #1a2a6c; color: white; }
        tr:nth-child(even) { background-color: #f0f0f0; }
        .input-container { margin-top: 20px; text-align: center; }
        label { display: inline-block; width: 120px; text-align: right; }
        input, select { padding: 5px; margin: 5px; width: 200px; }
        button { padding: 8px 12px; font-size: 16px; cursor: pointer; }
    </style>
</head>
<body>

<h1>RB PRO LİG - Puan Durumu</h1>

<!-- Yönetici Girişi -->
<h2>Yönetici Girişi</h2>
<div class="input-container">
    <label for="username">Username:</label>
    <input type="text" id="username" placeholder="Username">
</div>
<div class="input-container">
    <label for="password">Password:</label>
    <input type="password" id="password" placeholder="Password">
    <button onclick="adminLogin()">Login</button>
</div>

<!-- Yönetici Bölümü (Başlangıçta Gizli) -->
<div id="adminSection" style="display: none;">
    <h2>Team Management</h2>
    <div class="input-container">
        <label>New Team Name:</label>
        <input type="text" id="newTeamName" placeholder="Team Name">
        <button onclick="addTeam()">Add Team</button>
    </div>

    <div class="input-container">
        <label>Remove Team:</label>
        <select id="removeTeamSelect"></select>
        <button onclick="removeTeam()">Remove Team</button>
    </div>

    <h2>Manager Management</h2>
    <div class="input-container">
        <label>Select Team:</label>
        <select id="selectTeamForTD"></select>
    </div>
    <div class="input-container">
        <label>New Manager:</label>
        <input type="text" id="newTD" placeholder="Manager Name">
        <button onclick="addTD()">Add Manager</button>
    </div>

    <div class="input-container">
        <label>Remove Manager:</label>
        <select id="removeTDSelect"></select>
        <button onclick="removeTD()">Remove Manager</button>
    </div>

    <h2>Match Result</h2>
    <div class="input-container">
        <label>Team 1:</label>
        <select id="team1Select"></select>

        <label>Team 2:</label>
        <select id="team2Select"></select>

        <br>
        <label>Team 1 Score:</label>
        <input type="number" id="team1Score" value="0">

        <label>Team 2 Score:</label>
        <input type="number" id="team2Score" value="0">

        <button onclick="updateScore()">Update Score</button>
        <button onclick="resetScores()">Reset Scores</button>
    </div>
</div>

<!-- Puan Durumu Tablosu -->
<table id="teamTable">
    <thead>
        <tr>
            <th>Rank</th>
            <th>Team</th>
            <th>W</th>
            <th>D</th>
            <th>L</th>
            <th>GF</th>
            <th>GA</th>
            <th>GD</th>
            <th>Points</th>
            <th>Manager</th> <!-- Manager Column -->
        </tr>
    </thead>
    <tbody id="teamBody"></tbody>
</table>

<!-- Şampiyonlar Ligi Müzik -->
<iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/4RmSuRMlr17amYP0bKlxaf?utm_source=generator" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>

<script>
    const correctUsername = "admin";  // Admin username
    const correctPassword = "admin123";  // Admin password

    function adminLogin() {
        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        // Check if username and password are correct
        if (username === correctUsername && password === correctPassword) {
            document.getElementById("adminSection").style.display = "block";  // Show admin section
            alert("Login successful!");
        } else {
            alert("Incorrect username or password!");
        }
    }

    let teams = JSON.parse(localStorage.getItem("teams")) || [
        "Paris Saint-Germain", "Chelsea", "Liverpool"
    ];

    function populateTable() {
        const tableBody = document.getElementById("teamBody");
        tableBody.innerHTML = "";

        const sortedTeams = [...teams].sort((a, b) => {
            const dataA = JSON.parse(localStorage.getItem(a)) || { points: 0, goalDiff: 0 };
            const dataB = JSON.parse(localStorage.getItem(b)) || { points: 0, goalDiff: 0 };

            if (dataB.points !== dataA.points) return dataB.points - dataA.points;
            return dataB.goalDiff - dataA.goalDiff;
        });

        sortedTeams.forEach((team, index) => {
            const teamData = JSON.parse(localStorage.getItem(team)) || {
                games: 0, wins: 0, draws: 0, losses: 0, goals: 0, conceded: 0, goalDiff: 0, points: 0, td: ""
            };
            let row = `<tr id="${team}">
                <td>${index + 1}</td>
                <td>${team}</td>
                <td class="games">${teamData.games}</td>
                <td class="wins">${teamData.wins}</td>
                <td class="draws">${teamData.draws}</td>
                <td class="losses">${teamData.losses}</td>
                <td class="goals">${teamData.goals}</td>
                <td class="conceded">${teamData.conceded}</td>
                <td class="goalDiff">${teamData.goalDiff}</td>
                <td class="points">${teamData.points}</td>
                <td class="td">${teamData.td}</td>
            </tr>`;
            tableBody.innerHTML += row;
        });
    }

    function populateDropdowns() {
        const team1Select = document.getElementById("team1Select");
        const team2Select = document.getElementById("team2Select");
        const removeSelect = document.getElementById("removeTeamSelect");
        const selectTeamForTD = document.getElementById("selectTeamForTD");
        const removeTDSelect = document.getElementById("removeTDSelect");

        team1Select.innerHTML = "";
        team2Select.innerHTML = "";
        removeSelect.innerHTML = "";
        selectTeamForTD.innerHTML = "";
        removeTDSelect.innerHTML = "";

        teams.forEach(team => {
            let option = `<option value="${team}">${team}</option>`;
            team1Select.innerHTML += option;
            team2Select.innerHTML += option;
            removeSelect.innerHTML += option;
            selectTeamForTD.innerHTML += option;
            removeTDSelect.innerHTML += option;
        });
    }

    function addTeam() {
        const newTeam = document.getElementById("newTeamName").value.trim();
        if (!newTeam || teams.includes(newTeam)) {
            alert("Please enter a valid and new team name!");
            return;
        }

        teams.push(newTeam);
        localStorage.setItem("teams", JSON.stringify(teams));
        localStorage.setItem(newTeam, JSON.stringify({
            games: 0, wins: 0, draws: 0, losses: 0, goals: 0, conceded: 0, goalDiff: 0, points: 0, td: ""
        }));

        populateTable();
        populateDropdowns();
        alert(`${newTeam} successfully added!`);
        document.getElementById("newTeamName").value = "";
    }

    function removeTeam() {
        const removeTeam = document.getElementById("removeTeamSelect").value;
        teams = teams.filter(team => team !== removeTeam);
        localStorage.setItem("teams", JSON.stringify(teams));
        localStorage.removeItem(removeTeam);

        populateTable();
        populateDropdowns();
        alert(`${removeTeam} successfully removed!`);
    }

    function addTD() {
        const team = document.getElementById("selectTeamForTD").value;
        const tdName = document.getElementById("newTD").value.trim();
        if (!tdName) {
            alert("Please enter a valid manager name!");
            return;
        }

        let teamData = JSON.parse(localStorage.getItem(team)) || {
            games: 0, wins: 0, draws: 0, losses: 0, goals: 0, conceded: 0, goalDiff: 0, points: 0, td: ""
        };
        teamData.td = tdName;

        localStorage.setItem(team, JSON.stringify(teamData));
        populateTable();
        alert(`${team} team manager added: ${tdName}`);
        document.getElementById("newTD").value = "";
    }

    function removeTD() {
        const team = document.getElementById("removeTDSelect").value;
        let teamData = JSON.parse(localStorage.getItem(team)) || {
            games: 0, wins: 0, draws: 0, losses: 0, goals: 0, conceded: 0, goalDiff: 0, points: 0, td: ""
        };
        teamData.td = "";  // Remove manager

        localStorage.setItem(team, JSON.stringify(teamData));
        populateTable();
        alert(`${team} team's manager has been removed!`);
    }

    function updateScore() {
        const team1 = document.getElementById("team1Select").value;
        const team2 = document.getElementById("team2Select").value;
        const team1Score = parseInt(document.getElementById("team1Score").value);
        const team2Score = parseInt(document.getElementById("team2Score").value);

        let team1Data = JSON.parse(localStorage.getItem(team1));
        let team2Data = JSON.parse(localStorage.getItem(team2));

        team1Data.games++;
        team2Data.games++;

        team1Data.goals += team1Score;
        team2Data.goals += team2Score;
        team1Data.conceded += team2Score;
        team2Data.conceded += team1Score;

        team1Data.goalDiff = team1Data.goals - team1Data.conceded;
        team2Data.goalDiff = team2Data.goals - team2Data.conceded;

        if (team1Score > team2Score) { team1Data.wins++; team1Data.points += 3; team2Data.losses++; }
        else if (team1Score < team2Score) { team2Data.wins++; team2Data.points += 3; team1Data.losses++; }
        else { team1Data.draws++; team2Data.draws++; team1Data.points++; team2Data.points++; }

        localStorage.setItem(team1, JSON.stringify(team1Data));
        localStorage.setItem(team2, JSON.stringify(team2Data));

        populateTable();
    }

    function resetScores() {
        teams.forEach(team => {
            let teamData = JSON.parse(localStorage.getItem(team));

            // Keep Manager info and reset other stats
            let td = teamData.td;

            const resetData = {
                games: 0, wins: 0, draws: 0, losses: 0, goals: 0, conceded: 0, goalDiff: 0, points: 0, td: td
            };

            localStorage.setItem(team, JSON.stringify(resetData));
        });

        populateTable();
        alert("All teams' scores have been reset, but managers are retained!");
    }

    window.onload = function() {
        populateTable();
        populateDropdowns();
    };
</script>

</body>
</html>
