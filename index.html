<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RB PRO LİG - Puan Durumu</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 90%; margin: 20px auto; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #1a2a6c; color: white; }
        tr:nth-child(even) { background-color: #f0f0f0; }
        .input-container { margin-top: 20px; }
        input, select { padding: 5px; margin: 5px; }
        button { padding: 8px 12px; font-size: 16px; cursor: pointer; }
    </style>
</head>
<body>

<h1>RB PRO LİG - Puan Durumu</h1>

<table id="teamTable">
    <thead>
        <tr>
            <th>Sıra</th>
            <th>Takım</th>
            <th>O</th>
            <th>G</th>
            <th>B</th>
            <th>M</th>
            <th>AG</th>
            <th>YG</th>
            <th>Av</th>
            <th>Puan</th>
        </tr>
    </thead>
    <tbody id="teamBody"></tbody>
</table>

<h2>Takım Yönetimi</h2>
<div class="input-container">
    <label>Yeni Takım Adı:</label>
    <input type="text" id="newTeamName" placeholder="Takım Adı">
    <button onclick="addTeam()">Takım Ekle</button>
</div>

<div class="input-container">
    <label>Takım Sil:</label>
    <select id="removeTeamSelect"></select>
    <button onclick="removeTeam()">Takım Sil</button>
</div>

<h2>Maç Sonucu Girin</h2>
<div class="input-container">
    <label>Takım 1:</label>
    <select id="team1Select"></select>

    <label>Takım 2:</label>
    <select id="team2Select"></select>

    <br>
    <label>Takım 1 Skoru:</label>
    <input type="number" id="team1Score" value="0">

    <label>Takım 2 Skoru:</label>
    <input type="number" id="team2Score" value="0">

    <button onclick="updateScore()">Skoru Güncelle</button>
    <button onclick="resetScores()">Puanları Sıfırla</button>
</div>

<script>
    let teams = JSON.parse(localStorage.getItem("teams")) || [
        "Paris Saint-Germain", "Chelsea", "Liverpool"
    ];

    // Tabloyu doldur
    function populateTable() {
        const tableBody = document.getElementById("teamBody");
        tableBody.innerHTML = "";
        teams.forEach((team, index) => {
            let teamData = JSON.parse(localStorage.getItem(team)) || {
                games: 0, wins: 0, draws: 0, losses: 0, goals: 0, conceded: 0, goalDiff: 0, points: 0
            };
            let row = `<tr id="${team}">
                <td>${index + 1}</td>
                <td>${team}</td>
                <td class="games">${teamData.games}</td>
                <td class="wins">${teamData.wins}</td>
                <td class="draws">${teamData.draws}</td>
                <td class="losses">${teamData.losses}</td>
                <td class="goals">${teamData.goals}</td>
                <td class="conceded">${teamData.conceded}</td>
                <td class="goalDiff">${teamData.goalDiff}</td>
                <td class="points">${teamData.points}</td>
            </tr>`;
            tableBody.innerHTML += row;
        });
    }

    // Dropdown listeleri doldur
    function populateDropdowns() {
        const team1Select = document.getElementById("team1Select");
        const team2Select = document.getElementById("team2Select");
        const removeSelect = document.getElementById("removeTeamSelect");

        team1Select.innerHTML = "";
        team2Select.innerHTML = "";
        removeSelect.innerHTML = "";

        teams.forEach(team => {
            let option = `<option value="${team}">${team}</option>`;
            team1Select.innerHTML += option;
            team2Select.innerHTML += option;
            removeSelect.innerHTML += option;
        });
    }

    // Takım ekleme
    function addTeam() {
        const newTeam = document.getElementById("newTeamName").value.trim();
        if (!newTeam || teams.includes(newTeam)) {
            alert("Lütfen geçerli ve yeni bir takım adı girin!");
            return;
        }

        teams.push(newTeam);
        localStorage.setItem("teams", JSON.stringify(teams));
        localStorage.setItem(newTeam, JSON.stringify({games: 0, wins: 0, draws: 0, losses: 0, goals: 0, conceded: 0, goalDiff: 0, points: 0}));

        populateTable();
        populateDropdowns();
        alert(`${newTeam} başarıyla eklendi!`);
        document.getElementById("newTeamName").value = "";
    }

    // Takım silme
    function removeTeam() {
        const removeTeam = document.getElementById("removeTeamSelect").value;
        teams = teams.filter(team => team !== removeTeam);
        localStorage.setItem("teams", JSON.stringify(teams));
        localStorage.removeItem(removeTeam);

        populateTable();
        populateDropdowns();
        alert(`${removeTeam} başarıyla silindi!`);
    }

    // Skor güncelleme
    function updateScore() {
        const team1 = document.getElementById("team1Select").value;
        const team2 = document.getElementById("team2Select").value;
        const team1Score = parseInt(document.getElementById("team1Score").value);
        const team2Score = parseInt(document.getElementById("team2Score").value);

        let team1Data = JSON.parse(localStorage.getItem(team1));
        let team2Data = JSON.parse(localStorage.getItem(team2));

        team1Data.games++;
        team2Data.games++;

        team1Data.goals += team1Score;
        team2Data.goals += team2Score;
        team1Data.conceded += team2Score;
        team2Data.conceded += team1Score;

        team1Data.goalDiff = team1Data.goals - team1Data.conceded;
        team2Data.goalDiff = team2Data.goals - team2Data.conceded;

        if (team1Score > team2Score) { team1Data.wins++; team1Data.points += 3; team2Data.losses++; }
        else if (team1Score < team2Score) { team2Data.wins++; team2Data.points += 3; team1Data.losses++; }
        else { team1Data.draws++; team2Data.draws++; team1Data.points++; team2Data.points++; }

        localStorage.setItem(team1, JSON.stringify(team1Data));
        localStorage.setItem(team2, JSON.stringify(team2Data));

        populateTable();
        sortTableByPoints();
    }

    // Tabloyu puan ve averaja göre sırala
    function sortTableByPoints() {
        const tableBody = document.getElementById("teamBody");
        const rows = Array.from(tableBody.getElementsByTagName("tr"));

        rows.sort((a, b) => {
            const pointsA = parseInt(a.querySelector(".points").textContent);
            const pointsB = parseInt(b.querySelector(".points").textContent);
            const goalDiffA = parseInt(a.querySelector(".goalDiff").textContent);
            const goalDiffB = parseInt(b.querySelector(".goalDiff").textContent);

            // Önce puan, sonra averaja göre sırala
            if (pointsB !== pointsA) return pointsB - pointsA;
            return goalDiffB - goalDiffA;
        });

        rows.forEach((row, index) => {
            row.cells[0].textContent = index + 1; // Sıra numarasını güncelle
            tableBody.appendChild(row);
        });
    }

    // Tüm puanları sıfırla
    function resetScores() {
        teams.forEach(team => {
            const resetData = {games: 0, wins: 0, draws: 0, losses: 0, goals: 0, conceded: 0, goalDiff: 0, points: 0};
